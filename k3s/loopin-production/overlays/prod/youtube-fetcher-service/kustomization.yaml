apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: loopin-production

resources:
  - ../../../base/youtube-fetcher-service
  - youtube-api-key-secret.yaml

images:
  - name: ghcr.io/sglee487/loopin-server/youtube-fetcher-service
    newTag: f7941fc3020afd567b98a0dd1384737a579b7798-ubuntu-22.04-arm

configMapGenerator:
  - name: youtube-fetcher-service-config
    behavior: merge
    files:
      - application-prod.yml

patches:
  - path: deployment-patch.yaml
    target:
      kind: Deployment
      name: youtube-fetcher-service
